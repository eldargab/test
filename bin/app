#!/usr/bin/env node

'use strict'

const program = require('commander')
const go = require('go-async')
const proc = require('../lib/processes')

program.option('-e, --getErrors', 'Print and clear the error registry')

program.parse(process.argv)

function run(p) {
  go(p).get(function(err) {
    if (err) console.error(err)
    process.exit()
  })
}

if (program.getErrors) {
  run(proc.errorsDumper)
} else {
  run(proc.generator)
}
